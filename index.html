<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>morgun</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cstyle%3E@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700');%3C/style%3E%3Ctext x='5' y='52' font-family='Space Grotesk, sans-serif' font-weight='700' font-size='55' fill='white'%3Em%3C/text%3E%3Ccircle cx='56' cy='42' r='6' fill='%236366f1'/%3E%3C/svg%3E" type="image/svg+xml">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Space Grotesk', 'sans-serif'] },
                    colors: { discord: '#5865F2', osu: '#ff66aa' },
                    animation: {
                        'blob': 'blob 12s infinite',
                        'fade-in': 'fadeIn 0.3s ease-out forwards',
                        'pulse-fast': 'pulse 0.1s ease-in-out',
                    },
                    keyframes: {
                        blob: {
                            '0%, 100%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.05)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.95)' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* –û–°–ù–û–í–ù–û–ô –°–¢–ò–õ–¨ */
        body {
            background: radial-gradient(circle at center, #0a0a0a 0%, #000000 100%);
            color: #fff;
            cursor: none; /* –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫—É—Ä—Å–æ—Ä */
            min-height: 100vh;
            overflow-x: hidden;
            user-select: none;
        }

        /* –ö–£–†–°–û–† */
        #osu-cursor {
            position: fixed; top: 0; left: 0; width: 30px; height: 30px;
            pointer-events: none; z-index: 99999; /* –ü–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
            transform: translate(-50%, -50%); will-change: top, left;
        }
        #osu-cursor img { width: 100%; height: 100%; filter: drop-shadow(0 0 8px rgba(255,102,170,0.6)); }
        
        .trail-dot {
            position: fixed; pointer-events: none; z-index: 99998;
            width: 14px; height: 14px; background: rgba(255, 102, 170, 0.5);
            border-radius: 50%; transform: translate(-50%, -50%);
            animation: fadeTrail 0.3s linear forwards;
        }
        @keyframes fadeTrail { to { transform: translate(-50%, -50%) scale(0.2); opacity: 0; } }

        /* –§–û–ù–û–í–´–ô –®–£–ú */
        .bg-noise {
            position: fixed; inset: 0; z-index: 0; opacity: 0.015;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            pointer-events: none; mix-blend-mode: overlay;
        }

        /* BENTO –ö–ê–†–¢–û–ß–ö–ò */
        .bento-card {
            background-color: rgba(20, 20, 23, 0.6); 
            border: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(24px); 
            border-radius: 24px; 
            overflow: hidden; 
            position: relative;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.3s;
        }
        .bento-card:hover { 
            transform: translateY(-4px) scale-[1.005]; 
            background-color: rgba(255, 255, 255, 0.08); 
            border-color: rgba(255, 255, 255, 0.15); 
        }

        /* –ê–ù–ò–ú–ê–¶–ò–Ø –ü–Ø–¢–ï–ù */
        .blob { position: absolute; border-radius: 50%; mix-blend-mode: screen; filter: blur(100px); opacity: 0.25; animation: blob 12s infinite; }
        .blob-1 { background: #4f46e5; width: 500px; height: 500px; top: -200px; left: -200px; }
        .blob-2 { background: #ec4899; width: 400px; height: 400px; top: 20%; right: -100px; animation-delay: 2s; }
        .blob-3 { background: #06b6d4; width: 450px; height: 450px; bottom: -100px; left: 10%; animation-delay: 4s; }

        /* –≠–õ–ï–ú–ï–ù–¢–´ –ò–ù–¢–ï–†–§–ï–ô–°–ê */
        .nav-btn { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); padding: 10px 24px; border-radius: 99px; font-weight: 600; font-size: 14px; letter-spacing: 0.05em; transition: all 0.3s; color: #888; cursor: none; }
        .nav-btn:hover { color: #fff; background: rgba(255, 255, 255, 0.1); }
        .nav-btn.active { background: #fff; color: #000; border-color: #fff; box-shadow: 0 0 20px rgba(255,255,255,0.2); }

        .tab-content { display: none; width: 100%; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease-out forwards; }
        
        #toast { visibility: hidden; min-width: 250px; background-color: rgba(20, 20, 23, 0.9); backdrop-filter: blur(10px); color: #fff; text-align: center; border-radius: 50px; padding: 16px; position: fixed; z-index: 100; left: 50%; bottom: 30px; transform: translateX(-50%); font-size: 16px; border: 1px solid rgba(255,255,255,0.1); opacity: 0; transition: all 0.3s; }
        #toast.show { visibility: visible; opacity: 1; bottom: 50px; }
        #image-modal { transition: opacity 0.3s ease; }

        /* --- –°–¢–ò–õ–ò –î–õ–Ø –¢–ï–°–¢–ï–†–ê --- */
        .key-col { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        
        .key-display {
            width: 80px; height: 80px; border-radius: 16px;
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 32px; font-weight: 900; color: #444;
            transition: all 0.05s; text-transform: uppercase;
        }
        .key-display.active {
            background: #6366f1; color: white; border-color: #818cf8;
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.4); transform: scale(0.95);
        }
        
        .key-bind {
            font-size: 10px; color: #666; cursor: none; padding: 4px 12px; border-radius: 6px;
            border: 1px solid transparent; transition: all 0.2s; text-transform: uppercase;
        }
        .key-bind:hover { color: #fff; background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.1); }
        .key-bind.binding { color: #ff66aa; border-color: #ff66aa; animation: pulse-fast 1s infinite; }

        .graph-container {
            width: 100%; height: 200px; background: rgba(10,10,12,0.5);
            border: 1px solid rgba(255,255,255,0.05); border-radius: 12px;
            position: relative; overflow: hidden;
        }
        canvas { display: block; width: 100%; height: 100%; }
        
        .stat-box {
            background: rgba(255,255,255,0.03); border-radius: 12px; padding: 16px;
            border: 1px solid rgba(255,255,255,0.05); text-align: center;
            display: flex; flex-direction: column; justify-content: center;
        }
        .stat-value { font-size: 28px; font-weight: 700; line-height: 1; margin-bottom: 4px; }
        .stat-label { font-size: 10px; color: #666; text-transform: uppercase; letter-spacing: 0.05em; }
    </style>
</head>
<body class="flex flex-col items-center justify-start p-4 md:p-8 relative">

    <div id="osu-cursor">
        <img src="data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='60' cy='60' r='22' fill='%23FF66AA' fill-opacity='0.9'/%3E%3Ccircle cx='60' cy='60' r='18' stroke='white' stroke-width='3'/%3E%3C/svg%3E">
    </div>

    <div id="toast"><i class="fas fa-check-circle text-green-400 mr-2"></i> Copied!</div>

    <div id="image-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/90 backdrop-blur-sm p-4" onclick="closeImageModal()">
        <div class="relative max-w-5xl w-full animate-fade-in flex flex-col items-center">
            <button onclick="closeImageModal()" class="absolute -top-12 right-0 md:-right-4 text-white hover:text-red-400 transition-colors text-2xl p-2 cursor-none"><i class="fas fa-times"></i></button>
            <img id="modal-img" src="https://osu-sig.vercel.app/card?user=13017880&mode=std&lang=en&hex=4f46e5" alt="Full Stats" class="w-full h-auto rounded-xl border border-white/10" onclick="event.stopPropagation()">
        </div>
    </div>

    <div class="fixed inset-0 overflow-hidden -z-10">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>
    <div class="bg-noise"></div>

    <nav class="sticky top-4 z-50 flex gap-4 mb-8 backdrop-blur-md p-2 rounded-full border border-white/5 bg-black/20">
        <button onclick="switchTab('profile')" id="btn-profile" class="nav-btn active">PROFILE</button>
        <button onclick="switchTab('skins')" id="btn-skins" class="nav-btn">SKINS & STATS</button>
    </nav>

    <div class="w-full max-w-6xl z-10 min-h-[600px]">
        
        <div id="tab-profile" class="tab-content active">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:auto-rows-[minmax(180px,auto)]">
                
                <div class="bento-card col-span-2 row-span-2 p-8 flex flex-col justify-between group relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-32 bg-indigo-500/10 rounded-full blur-3xl -mr-16 -mt-16 group-hover:bg-indigo-500/20 transition-all duration-500"></div>
                    <div class="relative z-10">
                        <div id="profile-status-wrapper" class="inline-flex items-center px-3 py-1 rounded-full border border-gray-500/30 bg-gray-500/10 text-gray-400 text-xs font-bold mb-6 backdrop-blur-md transition-colors duration-300">
                            <span id="profile-status-dot" class="w-2 h-2 rounded-full bg-gray-400 mr-2"></span> 
                            <span id="profile-status-text">OFFLINE</span>
                        </div>
                        <h1 class="text-5xl md:text-7xl font-bold tracking-tight mb-2 text-white">morgun<span class="text-indigo-500">.</span></h1>
                        <p class="text-gray-300 text-lg md:text-xl font-light">Kvass energy enjoyer <span class="inline-block hover:animate-spin cursor-none">üëã</span></p>
                    </div>
                    <div class="mt-8 relative z-10">
                        <button onclick="copyDiscord()" class="flex items-center gap-3 bg-white/5 hover:bg-discord hover:text-white border border-white/10 px-5 py-3 rounded-xl transition-all duration-300 group/btn w-full md:w-auto cursor-none">
                            <i class="fab fa-discord text-xl text-gray-400 group-hover/btn:text-white transition-colors"></i>
                            <div class="text-left"><p class="text-xs text-gray-500 group-hover/btn:text-white/80 font-mono uppercase">Add me on Discord</p><p class="font-bold leading-none mt-1 tracking-wide">.morgun.</p></div>
                            <i class="fas fa-copy ml-auto opacity-0 group-hover/btn:opacity-100 transition-opacity"></i>
                        </button>
                    </div>
                </div>

                <a href="https://osu.ppy.sh/users/13017880" target="_blank" class="bento-card col-span-2 md:col-span-1 md:row-span-2 p-6 flex flex-col items-center justify-center text-center gap-4 group hover:border-osu/50 relative overflow-hidden cursor-none">
                    <div class="absolute inset-0 bg-osu/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="w-24 h-24 flex items-center justify-center group-hover:scale-110 group-hover:rotate-12 transition-all duration-300 z-10">
                         <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Osu%21_Logo_2016.svg/2048px-Osu%21_Logo_2016.svg.png" alt="osu! logo" class="w-full h-full object-contain drop-shadow-2xl">
                    </div>
                    <div class="z-10"><h3 class="text-2xl font-bold text-pink-100">Profile</h3><p class="text-gray-400 text-sm mt-1">Check main stats</p></div>
                </a>

                <a href="https://x.com/OsuMorgun" target="_blank" class="bento-card col-span-1 p-5 flex flex-col justify-between group hover:bg-blue-500/10 hover:border-blue-500/30 cursor-none">
                    <div class="flex justify-between items-start"><i class="fab fa-twitter text-3xl text-gray-400 group-hover:text-blue-400 transition-colors"></i><i class="fas fa-arrow-up-right-from-square text-xs text-gray-600 group-hover:text-white"></i></div><span class="font-bold text-lg mt-2">Twitter</span>
                </a>

                <a href="https://www.twitch.tv/omorgun" target="_blank" class="bento-card col-span-1 p-5 flex flex-col justify-between group hover:bg-purple-500/10 hover:border-purple-500/30 cursor-none">
                    <div class="flex justify-between items-start"><i class="fab fa-twitch text-3xl text-gray-400 group-hover:text-purple-400 transition-colors"></i><i class="fas fa-arrow-up-right-from-square text-xs text-gray-600 group-hover:text-white"></i></div><span class="font-bold text-lg mt-2">Twitch</span>
                </a>

                <div class="bento-card col-span-2 md:col-span-4 p-6 mt-2 relative overflow-hidden">
                    <div class="flex justify-between items-center mb-6 border-b border-white/5 pb-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-chart-line text-indigo-400 text-xl"></i>
                            <div>
                                <h2 class="text-xl font-bold uppercase tracking-wider leading-none">BPM TEST</h2>
                                <p class="text-[10px] text-gray-500 font-mono mt-1">This is not an accurate test compared to osu!</p>
                            </div>
                        </div>
                        <button onclick="resetTest()" class="text-xs font-bold text-gray-400 hover:text-white transition-colors cursor-none"><i class="fas fa-rotate-right mr-1"></i> RESET</button>
                    </div>

                    <div class="flex flex-col lg:flex-row gap-8">
                        <div class="flex flex-col gap-6 w-full lg:w-1/3">
                            <div class="flex justify-center gap-6">
                                <div class="key-col">
                                    <div id="k1-visual" class="key-display">Z</div>
                                    <div class="text-xs text-gray-500 font-mono"><span id="count-k1">0</span> taps</div>
                                    <div id="bind-k1" class="key-bind" onclick="bindKey('k1')">Change Key</div>
                                </div>
                                <div class="key-col">
                                    <div id="k2-visual" class="key-display">X</div>
                                    <div class="text-xs text-gray-500 font-mono"><span id="count-k2">0</span> taps</div>
                                    <div id="bind-k2" class="key-bind" onclick="bindKey('k2')">Change Key</div>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-3">
                                <div class="stat-box bg-indigo-500/10 border-indigo-500/20">
                                    <div class="stat-value text-indigo-400" id="val-bpm">0</div>
                                    <div class="stat-label">Stream BPM</div>
                                </div>
                                <div class="stat-box">
                                    <div class="stat-value text-white" id="val-ur">0.00</div>
                                    <div class="stat-label">Unstable Rate</div>
                                </div>
                                <div class="stat-box col-span-2">
                                    <div class="stat-value text-gray-300" id="val-time">0.000 s</div>
                                    <div class="stat-label">Test Duration</div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col w-full lg:w-2/3 justify-between">
                            <div class="graph-container">
                                <canvas id="bpmChart"></canvas>
                            </div>
                            <div class="mt-2 flex justify-between text-[10px] text-gray-600 font-mono uppercase">
                                <span>Unstable</span>
                                <span>Realtime Deviation</span>
                                <span>Stable</span>
                            </div>
                            
                            <div class="mt-4 p-3 bg-black/20 rounded-lg border border-white/5 text-[10px] text-gray-500 leading-relaxed font-mono">
                                <span class="text-indigo-400 font-bold">INFO:</span> BPM = (Clicks / Time) * (15000). Unstable Rate = Standard Deviation * 10. Graph shows instantaneous BPM variations.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-skins" class="tab-content">
            <div class="bento-card w-full mb-8 p-0 overflow-hidden relative group">
                <div class="absolute inset-0 bg-gradient-to-r from-indigo-900/20 to-purple-900/20"></div>
                <div class="p-6 md:p-8 relative z-10 flex flex-col md:flex-row items-center justify-between gap-6">
                    <div class="flex items-center gap-6">
                        <div class="relative"><img src="https://a.ppy.sh/13017880" alt="Avatar" class="w-20 h-20 rounded-2xl border-2 border-white/10 shadow-2xl"><div id="avatar-status-badge" class="absolute -bottom-2 -right-2 bg-gray-500 text-black text-[10px] font-bold px-2 py-0.5 rounded-full border border-black transition-colors duration-300">OFF</div></div>
                        <div><h2 class="text-3xl font-bold">Player Statistics</h2><p class="text-gray-400">Data provided by osu! API</p></div>
                    </div>
                    <div class="bg-black/40 rounded-xl p-2 border border-white/10 cursor-none hover:scale-105 hover:bg-white/10 transition-all duration-300 group/card" onclick="openImageModal()">
                        <div class="relative"><img src="https://osu-sig.vercel.app/card?user=13017880&mode=std&lang=en&hex=4f46e5" alt="Osu Stats Card" class="h-24 md:h-28 rounded-lg"><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover/card:opacity-100 transition-opacity"><i class="fas fa-expand-alt text-white drop-shadow-md text-2xl"></i></div></div>
                    </div>
                </div>
            </div>

            <div class="flex items-center justify-between mb-8 px-2">
                <div class="flex items-center gap-3"><i class="fas fa-gem text-indigo-400 text-xl"></i><h2 class="text-3xl font-bold">Skin Library</h2></div>
                <div class="text-sm font-mono text-gray-500 border border-white/10 px-3 py-1 rounded-full">v. 2025</div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <a href="https://skins.osuck.net/skins/4245?v=0" target="_blank" class="group relative bg-white/5 border border-white/5 rounded-2xl p-3 hover:bg-white/10 hover:border-indigo-500/30 transition-all duration-300 cursor-none">
                    <div class="h-40 w-full rounded-xl overflow-hidden relative mb-4 border border-white/5 shadow-lg group-hover:shadow-indigo-500/20 transition-all duration-500"><img src="https://skins.osuck.net/images/screenshots/942f0131248d07d4426ed6882545d7d1.webp" class="object-cover w-full h-full group-hover:scale-105 transition-transform duration-500"><div class="absolute inset-0 bg-indigo-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div><div class="absolute top-2 right-2 bg-black/60 backdrop-blur-md text-[10px] font-bold px-2 py-1 rounded border border-white/10 text-gray-300">2025</div></div>
                    <div class="flex justify-between items-end"><div><h3 class="font-bold text-lg text-gray-100 group-hover:text-indigo-400 transition-colors">Ashecho v1</h3><div class="flex gap-2 mt-1"><span class="text-[10px] bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 px-2 py-0.5 rounded">MAIN</span><span class="text-[10px] bg-white/5 border border-white/10 text-gray-400 px-2 py-0.5 rounded">BALANCED</span></div></div><div class="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-gray-400 group-hover:bg-indigo-500 group-hover:text-white transition-all"><i class="fas fa-download text-xs"></i></div></div>
                </a>
                <a href="https://skins.osuck.net/skins/166?v=0" target="_blank" class="group relative bg-white/5 border border-white/5 rounded-2xl p-3 hover:bg-white/10 hover:border-pink-500/30 transition-all duration-300 cursor-none">
                    <div class="h-40 w-full rounded-xl overflow-hidden relative mb-4 border border-white/5 shadow-lg group-hover:shadow-pink-500/20 transition-all duration-500"><img src="https://skins.osuck.net/images/screenshots/562f42b4af68706e5a6d079fc627937d.webp" class="object-cover w-full h-full group-hover:scale-105 transition-transform duration-500"><div class="absolute inset-0 bg-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div><div class="absolute top-2 right-2 bg-black/60 backdrop-blur-md text-[10px] font-bold px-2 py-1 rounded border border-white/10 text-gray-300">2018</div></div>
                    <div class="flex justify-between items-end"><div><h3 class="font-bold text-lg text-gray-100 group-hover:text-pink-400 transition-colors">Rafis HDDT</h3><div class="flex gap-2 mt-1"><span class="text-[10px] bg-pink-500/10 border border-pink-500/20 text-pink-300 px-2 py-0.5 rounded">SPEED</span><span class="text-[10px] bg-white/5 border border-white/10 text-gray-400 px-2 py-0.5 rounded">DT</span></div></div><div class="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-gray-400 group-hover:bg-pink-500 group-hover:text-white transition-all"><i class="fas fa-download text-xs"></i></div></div>
                </a>
                <a href="https://skins.osuck.net/skins/802?v=0" target="_blank" class="group relative bg-white/5 border border-white/5 rounded-2xl p-3 hover:bg-white/10 hover:border-cyan-500/30 transition-all duration-300 cursor-none">
                    <div class="h-40 w-full rounded-xl overflow-hidden relative mb-4 border border-white/5 shadow-lg group-hover:shadow-cyan-500/20 transition-all duration-500"><img src="https://skins.osuck.net/images/screenshots/73d084dc255b999ec5e49f31cbf73d51.webp" class="object-cover w-full h-full group-hover:scale-105 transition-transform duration-500"><div class="absolute inset-0 bg-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div><div class="absolute top-2 right-2 bg-black/60 backdrop-blur-md text-[10px] font-bold px-2 py-1 rounded border border-white/10 text-gray-300">2019</div></div>
                    <div class="flex justify-between items-end"><div><h3 class="font-bold text-lg text-gray-100 group-hover:text-cyan-400 transition-colors">Rohulk v5.0</h3><div class="flex gap-2 mt-1"><span class="text-[10px] bg-cyan-500/10 border border-cyan-500/20 text-cyan-300 px-2 py-0.5 rounded">AIM</span><span class="text-[10px] bg-white/5 border border-white/10 text-gray-400 px-2 py-0.5 rounded">STABLE</span></div></div><div class="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-gray-400 group-hover:bg-cyan-500 group-hover:text-white transition-all"><i class="fas fa-download text-xs"></i></div></div>
                </a>
            </div>
        </div>
    </div>
    
    <footer class="mt-12 mb-6 text-gray-600 text-xs font-mono uppercase tracking-widest z-10">MORGUN ¬© 2025</footer>

    <script>
        const DISCORD_ID = "1193659050878054551";

        /* --- CURSOR --- */
        const cursor = document.getElementById('osu-cursor');
        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX; mouseY = e.clientY;
            cursor.style.left = mouseX + 'px'; cursor.style.top = mouseY + 'px';
            if(Math.random() > 0.5) {
                const dot = document.createElement('div'); dot.className = 'trail-dot';
                dot.style.left = mouseX+'px'; dot.style.top = mouseY+'px';
                document.body.appendChild(dot); setTimeout(()=>dot.remove(),300);
            }
        });

        /* --- LANYARD STATUS --- */
        async function fetchLanyardStatus() {
            try {
                const res = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_ID}`);
                const data = await res.json();
                if (data.success) updateStatusBadges(data.data);
            } catch (e) { console.error(e); }
        }

        function updateStatusBadges(discordData) {
            const status = discordData.discord_status;
            const activities = discordData.activities || [];
            
            const profileWrapper = document.getElementById('profile-status-wrapper');
            const profileDot = document.getElementById('profile-status-dot');
            const profileText = document.getElementById('profile-status-text');
            const avatarBadge = document.getElementById('avatar-status-badge');

            let primary = activities.find(a => a.name.toLowerCase().includes('osu'));
            if (!primary) primary = activities.find(a => a.type === 0);
            if (!primary) primary = activities.find(a => a.type === 1);
            let spotify = activities.find(a => a.type === 2);

            let color = 'text-gray-400', bg = 'bg-gray-500/10', border = 'border-gray-500/30';
            let txt = 'OFFLINE', dot = 'bg-gray-400', avTxt = 'OFF', avBg = 'bg-gray-500', pulse = false;

            if (primary) {
                const name = primary.name.toUpperCase();
                if (name.includes('OSU')) { color='text-pink-400'; bg='bg-pink-500/10'; border='border-pink-500/30'; dot='bg-pink-400'; avBg='bg-pink-500'; }
                else { color='text-indigo-400'; bg='bg-indigo-500/10'; border='border-indigo-500/30'; dot='bg-indigo-400'; avBg='bg-indigo-500'; }
                txt = primary.type === 1 ? `STREAMING ${name}` : `PLAYING ${name}`; avTxt='GAME'; pulse=true;
            } else if (spotify) {
                color='text-green-400'; bg='bg-green-500/10'; border='border-green-500/30'; dot='bg-green-400'; txt='LISTENING SPOTIFY'; avTxt='MUSIC'; avBg='bg-green-500'; pulse=true;
            } else if (status === 'online') {
                color='text-green-400'; bg='bg-green-500/10'; border='border-green-500/30'; dot='bg-green-400'; txt='ONLINE'; avTxt='LIVE'; avBg='bg-green-500'; pulse=true;
            } else if (status === 'idle') {
                color='text-yellow-400'; bg='bg-yellow-500/10'; border='border-yellow-500/30'; dot='bg-yellow-400'; txt='IDLE'; avTxt='AWAY'; avBg='bg-yellow-500';
            } else if (status === 'dnd') {
                color='text-red-400'; bg='bg-red-500/10'; border='border-red-500/30'; dot='bg-red-400'; txt='BUSY'; avTxt='DND'; avBg='bg-red-500';
            }

            profileWrapper.className = `inline-flex items-center px-3 py-1 rounded-full border text-xs font-bold mb-6 backdrop-blur-md transition-colors duration-300 ${bg} ${border} ${color}`;
            profileText.innerText = txt.length > 28 ? txt.substring(0,28)+'...' : txt;
            profileDot.className = `w-2 h-2 rounded-full mr-2 ${dot} ${pulse ? 'animate-pulse' : ''}`;
            avatarBadge.className = `absolute -bottom-2 -right-2 text-black text-[10px] font-bold px-2 py-0.5 rounded-full border border-black transition-colors duration-300 ${avBg} ${pulse ? 'animate-pulse' : ''}`;
            avatarBadge.innerText = avTxt;
        }
        fetchLanyardStatus(); setInterval(fetchLanyardStatus, 5000);

        function switchTab(t) { document.querySelectorAll('.tab-content').forEach(e=>e.classList.remove('active')); document.querySelectorAll('.nav-btn').forEach(e=>e.classList.remove('active')); document.getElementById('tab-'+t).classList.add('active'); document.getElementById('btn-'+t).classList.add('active'); }
        function copyDiscord() { navigator.clipboard.writeText(".morgun.").then(()=>{ var t=document.getElementById("toast"); t.className="show"; setTimeout(()=>t.className=t.className.replace("show",""),3000); }); }
        function openImageModal() { document.getElementById('image-modal').classList.remove('hidden'); }
        function closeImageModal() { document.getElementById('image-modal').classList.add('hidden'); }
        document.addEventListener('keydown', e=>{if(e.key==="Escape")closeImageModal()});

        /* --- STREAM ENGINE (OSU LOGIC REPLICA) --- */
        let clickTimes = [];
        let timeDiffs = [];
        let beginTime = -1;
        let keys = { k1: 'z', k2: 'x' };
        let counts = { k1: 0, k2: 0 };
        let binding = null;
        let chartData = []; 

        const canvas = document.getElementById('bpmChart');
        const ctx = canvas.getContext('2d');
        let width, height;

        function resize() {
            width = canvas.parentElement.clientWidth;
            height = canvas.parentElement.clientHeight;
            canvas.width = width; canvas.height = height;
        }
        window.addEventListener('resize', resize); resize();

        function bindKey(k) {
            binding = k;
            const btn = document.getElementById('bind-'+k);
            btn.innerText = "..."; btn.classList.add('binding');
        }

        function resetTest() {
            clickTimes = []; timeDiffs = []; chartData = [];
            counts = { k1: 0, k2: 0 };
            beginTime = -1;
            document.getElementById('val-bpm').innerText = "0";
            document.getElementById('val-ur').innerText = "0.00";
            document.getElementById('val-time').innerText = "0.000 s";
            document.getElementById('count-k1').innerText = "0";
            document.getElementById('count-k2').innerText = "0";
            ctx.clearRect(0,0,width,height);
        }

        function update(click) {
            if (click) {
                const now = Date.now();
                clickTimes.push(now);
                if (clickTimes.length > 1) {
                    timeDiffs.push(clickTimes[clickTimes.length - 1] - clickTimes[clickTimes.length - 2]);
                }
                
                // --- MATH LOGIC FROM OSUSTREAMSPEED.JS ---
                if (timeDiffs.length > 0) {
                    const sum = timeDiffs.reduce((a, b) => a + b, 0);
                    const avg = sum / timeDiffs.length;
                    
                    // Variance & Standard Deviation
                    const deviations = timeDiffs.map(v => (v - avg) * (v - avg));
                    const variance = deviations.reduce((a, b) => a + b, 0) / deviations.length;
                    const std = Math.sqrt(variance);
                    const unstableRate = std * 10;
                    document.getElementById('val-ur').innerText = unstableRate.toFixed(2);
                }

                if (clickTimes.length > 2) {
                    // Instant BPM for Graph (Last 10 clicks rolling avg)
                    const slice = timeDiffs.slice(-10);
                    const instantAvg = slice.reduce((a,b)=>a+b,0) / slice.length;
                    const currentBPM = Math.round(15000 / instantAvg); 
                    
                    chartData.push(currentBPM);
                    if(chartData.length > 100) chartData.shift(); 
                    drawChart();
                }

            } else {
                // Timer Loop
                if(beginTime !== -1) {
                    const streamTime = (Date.now() - beginTime) / 1000;
                    document.getElementById('val-time').innerText = streamTime.toFixed(3) + " s";
                    
                    // Overall Avg BPM
                    if (clickTimes.length > 2) {
                        const totalMinutes = (Date.now() - beginTime) / 60000;
                        const bpm = Math.round((clickTimes.length / totalMinutes) / 4);
                        document.getElementById('val-bpm').innerText = bpm;
                    }
                }
            }
        }

        function drawChart() {
            ctx.clearRect(0, 0, width, height);
            if (chartData.length < 2) return;

            ctx.beginPath();
            const stepX = width / (chartData.length - 1);
            
            // Dynamic Scaling
            const min = Math.min(...chartData) * 0.9;
            const max = Math.max(...chartData) * 1.1;
            const range = max - min || 1;

            chartData.forEach((val, i) => {
                const x = i * stepX;
                const normalizedY = (val - min) / range;
                const y = height - (normalizedY * height); 
                if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
            });

            ctx.strokeStyle = '#6366f1'; ctx.lineWidth = 2; ctx.stroke();
            
            // Gradient Fill
            ctx.lineTo(width, height); ctx.lineTo(0, height);
            const grad = ctx.createLinearGradient(0, 0, 0, height);
            grad.addColorStop(0, 'rgba(99, 102, 241, 0.5)');
            grad.addColorStop(1, 'rgba(99, 102, 241, 0)');
            ctx.fillStyle = grad; ctx.fill();
        }

        // Input Listener
        document.addEventListener('keydown', (e) => {
            if (e.repeat) return;
            const key = e.key.toLowerCase();

            // Key Binding
            if (binding) {
                keys[binding] = key;
                document.getElementById(binding+'-visual').innerText = key.toUpperCase();
                const btn = document.getElementById('bind-'+binding);
                btn.innerText = "Change Key"; btn.classList.remove('binding');
                binding = null; return;
            }

            // Test Logic
            const isK1 = key === keys.k1;
            const isK2 = key === keys.k2;

            if (isK1 || isK2) {
                e.preventDefault();
                
                if (beginTime === -1) {
                    beginTime = Date.now();
                    // Timer Loop (approx 30fps update for UI)
                    setInterval(() => update(false), 30);
                }

                if (isK1) {
                    counts.k1++;
                    document.getElementById('count-k1').innerText = counts.k1;
                    const el = document.getElementById('k1-visual');
                    el.classList.add('active'); setTimeout(()=>el.classList.remove('active'), 80);
                } else {
                    counts.k2++;
                    document.getElementById('count-k2').innerText = counts.k2;
                    const el = document.getElementById('k2-visual');
                    el.classList.add('active'); setTimeout(()=>el.classList.remove('active'), 80);
                }

                update(true);
            }
        });
    </script>
</body>
</html>
